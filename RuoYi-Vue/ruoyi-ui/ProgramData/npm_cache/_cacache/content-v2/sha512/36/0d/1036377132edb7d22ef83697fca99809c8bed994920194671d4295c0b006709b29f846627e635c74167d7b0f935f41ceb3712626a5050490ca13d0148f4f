{"_attachments":{},"_id":"async-limiter","_rev":"278403-61f1bb06bc297006084af4a9","author":{"name":"Samuel Reed"},"description":"asynchronous function queue with adjustable concurrency","dist-tags":{"latest":"2.0.0"},"license":"MIT","maintainers":[{"name":"strml","email":"samuel.trace.reed@gmail.com"}],"name":"async-limiter","readme":"# Async-Limiter\n\nA module for limiting concurrent asynchronous actions in flight. Forked from [queue](https://github.com/jessetane/queue).\n\n[![npm](http://img.shields.io/npm/v/async-limiter.svg?style=flat-square)](http://www.npmjs.org/async-limiter)\n[![tests](https://img.shields.io/travis/STRML/async-limiter.svg?style=flat-square&branch=master)](https://travis-ci.org/STRML/async-limiter)\n[![coverage](https://img.shields.io/coveralls/STRML/async-limiter.svg?style=flat-square&branch=master)](https://coveralls.io/r/STRML/async-limiter)\n\nThis module exports a class `Limiter` that implements some of the `Array` API.\nPass async functions (ones that accept a callback or return a promise) to an instance's additive array methods.\n\n## Motivation\n\nCertain functions, like `zlib`, have [undesirable behavior](https://github.com/nodejs/node/issues/8871#issuecomment-250915913) when\nrun at infinite concurrency.\n\nIn this case, it is actually faster, and takes far less memory, to limit concurrency.\n\nThis module should do the absolute minimum work necessary to queue up functions. PRs are welcome that would\nmake this module faster or lighter, but new functionality is not desired.\n\nStyle should confirm to nodejs/node style.\n\n## Example\n\n``` javascript\nvar Limiter = require('async-limiter');\n\nvar t = new Limiter({ concurrency: 2 });\nvar results = [];\n\n// add jobs using the familiar Array API\nt.push(function(cb) {\n  results.push('two');\n  cb();\n});\n\nt.push(\n  function(cb) {\n    results.push('four');\n    cb();\n  },\n  function(cb) {\n    results.push('five');\n    cb();\n  }\n);\n\nt.unshift(function(cb) {\n  results.push('one');\n  cb();\n});\n\nt.splice(2, 0, function(cb) {\n  results.push('three');\n  cb();\n});\n\n// Jobs run automatically on the next tick.\n// If you want a callback when all are done, call 'onDone()'.\nt.onDone(function() {\n  console.log('all done:', results);\n});\n```\n\n## Zlib Example\n\n```js\nconst zlib = require('zlib');\nconst Limiter = require('async-limiter');\n\nconst message = { some: 'data' };\nconst payload = new Buffer(JSON.stringify(message));\n\n// Try with different concurrency values to see how this actually\n// slows significantly with higher concurrency!\n//\n// 5:        1398.607ms\n// 10:       1375.668ms\n// Infinity: 4423.300ms\n//\nconst t = new Limiter({ concurrency: 5 });\nfunction deflate(payload, cb) {\n  t.push(function(done) {\n    zlib.deflate(payload, function(err, buffer) {\n      done();\n      cb(err, buffer);\n    });\n  });\n}\n\nconsole.time('deflate');\nfor (let i = 0; i < 30000; ++i) {\n  deflate(payload, function(err, buffer) {});\n}\nt.onDone(function() {\n  console.timeEnd('deflate');\n});\n```\n\n## Install\n\n`npm install async-limiter`\n\n## Test\n\n`npm test`\n\n## API\n\n### `var t = new Limiter([opts])`\nConstructor. `opts` may contain inital values for:\n* `t.concurrency`\n\n## Instance methods\n\n### `t.onDone(fn)`\n`fn` will be called once and only once, when the queue is empty.\nIf the queue is empty on the next tick, `onDone()` will be called.\n\n## Instance methods mixed in from `Array`\nMozilla has docs on how these methods work [here](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array).\n### `t.push(element1, ..., elementN)`\n### `t.unshift(element1, ..., elementN)`\n### `t.splice(index , howMany[, element1[, ...[, elementN]]])`\n\nOn the next tick, job processing will start.\n\n## Properties\n### `t.concurrency`\nMax number of jobs the queue should process concurrently, defaults to `Infinity`.\n\n### `t.length`\nJobs pending + jobs to process (readonly).\n\n","time":{"created":"2022-01-26T21:20:06.026Z","modified":"2023-07-28T04:06:34.435Z","2.0.0":"2019-11-20T17:39:05.353Z","1.0.1":"2019-08-02T15:43:53.217Z","1.0.0":"2017-09-11T16:57:49.546Z"},"versions":{"2.0.0":{"name":"async-limiter","version":"2.0.0","description":"asynchronous function queue with adjustable concurrency","keywords":["throttle","async","limiter","asynchronous","job","task","concurrency","concurrent"],"dependencies":{},"devDependencies":{"coveralls":"^3.0.7","eslint":"^6.6.0","eslint-plugin-mocha":"^6.2.1","intelli-espower-loader":"^1.0.1","mocha":"^6.2.2","nyc":"^14.1.1","power-assert":"^1.6.1"},"scripts":{"test":"mocha --require intelli-espower-loader test/","travis":"npm run lint && npm run test","coverage":"nyc npm test && nyc report --reporter=text-lcov | coveralls","example":"node example","lint":"eslint ."},"repository":{"type":"git","url":"https://github.com/strml/async-limiter.git"},"author":{"name":"Samuel Reed"},"license":"MIT","licenseText":"The MIT License (MIT)\nCopyright (c) 2017 Samuel Reed <samuel.trace.reed@gmail.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n","_id":"async-limiter@2.0.0","dist":{"shasum":"ae693f11cac67f4ac5eb6e0c1512fb9b2c2e9ea8","size":4244,"noattachment":false,"tarball":"https://registry.npmmirror.com/async-limiter/-/async-limiter-2.0.0.tgz","integrity":"sha512-nyHFzvVaR+4mfHc90/VqOUQjlnk9+ioDxQfqDuqKnm3m9sIT7joVKW8dkxeaKpamMJ3MYD73t6M8PMKEWlQESQ=="},"maintainers":[{"name":"strml","email":"samuel.trace.reed@gmail.com"}],"_npmUser":{"name":"strml","email":"samuel.trace.reed@gmail.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/async-limiter_2.0.0_1574271544660_0.545457320987442"},"_hasShrinkwrap":false,"publish_time":1574271545353,"_cnpm_publish_time":1574271545353,"_cnpmcore_publish_time":"2021-12-16T15:14:15.834Z"},"1.0.1":{"name":"async-limiter","version":"1.0.1","description":"asynchronous function queue with adjustable concurrency","keywords":["throttle","async","limiter","asynchronous","job","task","concurrency","concurrent"],"dependencies":{},"devDependencies":{"coveralls":"^3.0.3","eslint":"^5.16.0","eslint-plugin-mocha":"^5.3.0","intelli-espower-loader":"^1.0.1","mocha":"^6.1.4","nyc":"^14.1.1","power-assert":"^1.6.1"},"scripts":{"test":"mocha --require intelli-espower-loader test/","travis":"npm run lint && npm run test","coverage":"nyc npm test && nyc report --reporter=text-lcov | coveralls","example":"node example","lint":"eslint ."},"repository":{"type":"git","url":"git+https://github.com/strml/async-limiter.git"},"author":{"name":"Samuel Reed"},"license":"MIT","gitHead":"f3bb66f26e69a5747a6483e32c775a02632020ee","bugs":{"url":"https://github.com/strml/async-limiter/issues"},"homepage":"https://github.com/strml/async-limiter#readme","_id":"async-limiter@1.0.1","_nodeVersion":"10.16.0","_npmVersion":"6.9.0","dist":{"shasum":"dd379e94f0db8310b08291f9d64c3209766617fd","size":3380,"noattachment":false,"tarball":"https://registry.npmmirror.com/async-limiter/-/async-limiter-1.0.1.tgz","integrity":"sha512-csOlWGAcRFJaI6m+F2WKdnMKr4HhdhFVBk0H/QbJFMCr+uO2kwohwXQPxw/9OCxp05r5ghVBFSyioixx3gfkNQ=="},"maintainers":[{"name":"strml","email":"samuel.trace.reed@gmail.com"}],"_npmUser":{"name":"strml","email":"samuel.trace.reed@gmail.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/async-limiter_1.0.1_1564760633070_0.6974331182093105"},"_hasShrinkwrap":false,"publish_time":1564760633217,"_cnpm_publish_time":1564760633217,"_cnpmcore_publish_time":"2021-12-16T15:14:15.985Z"},"1.0.0":{"name":"async-limiter","version":"1.0.0","description":"asynchronous function queue with adjustable concurrency","keywords":["throttle","async","limiter","asynchronous","job","task","concurrency","concurrent"],"dependencies":{},"devDependencies":{"coveralls":"^2.11.2","eslint":"^4.6.1","eslint-plugin-mocha":"^4.11.0","intelli-espower-loader":"^1.0.1","istanbul":"^0.3.2","mocha":"^3.5.2","power-assert":"^1.4.4"},"scripts":{"test":"mocha --R intelli-espower-loader test/","travis":"npm run lint && npm run coverage","coverage":"istanbul cover ./node_modules/mocha/bin/_mocha --report lcovonly -- -R spec && cat ./coverage/lcov.info | coveralls","example":"node example","lint":"eslint ."},"repository":{"type":"git","url":"git+https://github.com/strml/async-limiter.git"},"author":{"name":"Samuel Reed"},"license":"MIT","gitHead":"02c8b498279dc7cc1ecc1c4f6fc9ca320c0ce39b","bugs":{"url":"https://github.com/strml/async-limiter/issues"},"homepage":"https://github.com/strml/async-limiter#readme","_id":"async-limiter@1.0.0","_npmVersion":"5.4.1","_nodeVersion":"8.4.0","_npmUser":{"name":"strml","email":"samuel.trace.reed@gmail.com"},"dist":{"shasum":"78faed8c3d074ab81f22b4e985d79e8738f720f8","size":16426,"noattachment":false,"tarball":"https://registry.npmmirror.com/async-limiter/-/async-limiter-1.0.0.tgz","integrity":"sha512-jp/uFnooOiO+L211eZOoSyzpOITMXx1rBITauYykG3BRYPu8h0UcxsPNB04RR5vo4Tyz3+ay17tR6JVf9qzYWg=="},"maintainers":[{"name":"strml","email":"samuel.trace.reed@gmail.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/async-limiter-1.0.0.tgz_1505149068503_0.15003100014291704"},"directories":{},"publish_time":1505149069546,"_hasShrinkwrap":false,"_cnpm_publish_time":1505149069546,"_cnpmcore_publish_time":"2021-12-16T15:14:16.394Z"}},"keywords":["throttle","async","limiter","asynchronous","job","task","concurrency","concurrent"],"repository":{"type":"git","url":"https://github.com/strml/async-limiter.git"},"_source_registry_name":"default"}